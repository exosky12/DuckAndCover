<?xml version="1.0" encoding="utf-8"?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="DuckAndCover.Pages.GameMenu"
             ControlTemplate="{StaticResource BackgroundTemplate}"
             xmlns:components="clr-namespace:DuckAndCover.Views"
             Title="Configuration de la partie">

    <Grid RowDefinitions="Auto,*" Padding="20">
        
        <Grid Grid.Row="0" ColumnDefinitions="*,Auto" Margin="0,20,0,10">
            <Label Grid.Column="0" 
                   Text="Configuration de la partie" 
                   FontSize="24" 
                   FontAttributes="Bold" 
                   TextColor="{AppThemeBinding Light=#222222, Dark=#DDDDDD}" 
                   HorizontalOptions="Center"
                   VerticalOptions="Center"/>
            
            <Button x:Name="DarkModeButton"
                    Grid.Column="1"
                    Text="ðŸŒ™" 
                    FontAttributes="Bold"
                    CornerRadius="25"
                    Padding="12,8"
                    FontSize="20"
                    Clicked="OnDarkModeClicked"
                    HorizontalOptions="End"
                    VerticalOptions="Center"
                    BackgroundColor="{AppThemeBinding Light=#F5F5F5, Dark=#333333}" 
                    BorderColor="{AppThemeBinding Light=#2196F3, Dark=#64B5F6}"
                    BorderWidth="2"
                    TextColor="{AppThemeBinding Light=#2196F3, Dark=#64B5F6}"
                    WidthRequest="55" 
                    HeightRequest="55">
                <Button.Shadow>
                    <Shadow Brush="{AppThemeBinding Light=Black, Dark=Gray}" Opacity="0.3" Offset="2,2" Radius="4"/>
                </Button.Shadow>
            </Button>
        </Grid>

        <ScrollView Grid.Row="1">
            <VerticalStackLayout HorizontalOptions="Center" WidthRequest="600" Spacing="20" Margin="0, 20">
            
            <Border BackgroundColor="#80000000" Padding="20" Stroke="#00000000" StrokeThickness="0" >
                <VerticalStackLayout Spacing="8" HorizontalOptions="Center">
                    <Label Text="Configuration de la partie" 
                           FontSize="32" 
                           FontAttributes="Bold" 
                           HorizontalOptions="Center"
                           TextColor="White"/>
                    <Label Text="Configurez les paramÃ¨tres de votre partie"
                           FontSize="16"
                           HorizontalOptions="Center"
                           TextColor="#DDDDDD"/>
                </VerticalStackLayout>
            </Border>

            <Border BackgroundColor="{AppThemeBinding Light=#CCFFFFFF, Dark=#333333}" Padding="30" Stroke="{AppThemeBinding Light=#E0E0E0, Dark=#666666}" StrokeThickness="1" >
                <VerticalStackLayout Spacing="30">

                    <Border BackgroundColor="{AppThemeBinding Light=#CCFFFFFF, Dark=#444444}" Stroke="{AppThemeBinding Light=#E0E0E0, Dark=#666666}" StrokeThickness="1" Padding="20">
                        <VerticalStackLayout Spacing="15">
                            <Label Text="Nombre de joueurs au total (IA incluses)"
                                   FontSize="24"
                                   FontAttributes="Bold"
                                   TextColor="{AppThemeBinding Light=#222222, Dark=#DDDDDD}"/>
                            <Entry x:Name="PlayerCountEntry"
                                   Placeholder="Ex: 3"
                                   Keyboard="Numeric"
                                   Style="{StaticResource InputEntryStyle}"
                                   Margin="0,10,0,0"/>
                        </VerticalStackLayout>
                    </Border>

                    <Border BackgroundColor="{AppThemeBinding Light=#CCFFFFFF, Dark=#444444}" Stroke="{AppThemeBinding Light=#E0E0E0, Dark=#666666}" StrokeThickness="1" Padding="20">
                        <VerticalStackLayout Spacing="15">
                            <Label Text="Joueurs IA"
                                   FontSize="24"
                                   FontAttributes="Bold"
                                   TextColor="{AppThemeBinding Light=#222222, Dark=#DDDDDD}"/>
                            
                            <Grid ColumnDefinitions="Auto,*" Margin="0,10,0,0">
                                <Switch x:Name="BotSwitch"
                                        IsToggled="False"
                                        OnColor="#4CAF50"
                                        ThumbColor="White"
                                        Toggled="BotSwitch_Toggled"/>
                                <Label Grid.Column="1" 
                                       Text="Activer les joueurs IA"
                                       VerticalOptions="Center"
                                       Margin="12,0,0,0"
                                       TextColor="{AppThemeBinding Light=#222222, Dark=#DDDDDD}"/>
                            </Grid>

                            <Border x:Name="BotCountSection"
                                   IsVisible="True"
                                   BackgroundColor="{AppThemeBinding Light=#F5F5F5CC, Dark=#555555CC}"
                                   Stroke="{AppThemeBinding Light=#E0E0E0, Dark=#666666}"
                                   StrokeThickness="1"
                                   Padding="15"
                                   Margin="0,10,0,0">
                                <VerticalStackLayout Spacing="10">
                                    <Label Text="Nombre de bots"
                                           FontSize="18"
                                           TextColor="{AppThemeBinding Light=#222222, Dark=#DDDDDD}"
                                           x:Name="BotCountLabel"/>
                                    <Entry x:Name="BotCountEntry"
                                           Placeholder="Ex: 1"
                                           Keyboard="Numeric"
                                           Style="{StaticResource InputEntryStyle}"/>
                                </VerticalStackLayout>
                            </Border>
                        </VerticalStackLayout>
                    </Border>

                    <Border BackgroundColor="{AppThemeBinding Light=#CCFFFFFF, Dark=#444444}" Stroke="{AppThemeBinding Light=#E0E0E0, Dark=#666666}" StrokeThickness="1" Padding="20">
                        <VerticalStackLayout Spacing="15">
                            <Label Text="RÃ¨gles du jeu"
                                   FontSize="24"
                                   FontAttributes="Bold"
                                   TextColor="{AppThemeBinding Light=#222222, Dark=#DDDDDD}"/>
                            
                            <Label Text="SÃ©lectionnez le type de rÃ¨gles Ã  appliquer"
                                   FontSize="16"
                                   TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}"
                                   Margin="0,0,0,10"/>

                            <Grid ColumnDefinitions="Auto,*" Margin="0,5,0,0">
                                <Switch x:Name="ClassicRulesSwitch"
                                        IsToggled="True"
                                        OnColor="#4CAF50"
                                        ThumbColor="White"
                                        Toggled="ClassicRules_Toggled"/>
                                <VerticalStackLayout Grid.Column="1" Margin="12,0,0,0">
                                    <Label Text="RÃ¨gles classiques"
                                           FontSize="18"
                                           FontAttributes="Bold"
                                           TextColor="{AppThemeBinding Light=#222222, Dark=#DDDDDD}"/>
                                    <Label Text="Mode de jeu standard avec les rÃ¨gles traditionnelles"
                                           FontSize="14"
                                           TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}"
                                           Opacity="0.8"/>
                                </VerticalStackLayout>
                            </Grid>

                            <Grid ColumnDefinitions="Auto,*" Margin="0,10,0,0">
                                <Switch x:Name="BlitzRulesSwitch"
                                        IsToggled="False"
                                        OnColor="#FF9800"
                                        ThumbColor="White"
                                        Toggled="BlitzRules_Toggled"/>
                                <VerticalStackLayout Grid.Column="1" Margin="12,0,0,0">
                                    <Label Text="RÃ¨gles Blitz"
                                           FontSize="18"
                                           FontAttributes="Bold"
                                           TextColor="{AppThemeBinding Light=#222222, Dark=#DDDDDD}"/>
                                    <Label Text="Parties rapides avec temps limitÃ© et actions accÃ©lÃ©rÃ©es"
                                           FontSize="14"
                                           TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}"
                                           Opacity="0.8"/>
                                </VerticalStackLayout>
                            </Grid>

                            <Grid ColumnDefinitions="Auto,*" Margin="0,10,0,0">
                                <Switch x:Name="InsaneRulesSwitch"
                                        IsToggled="False"
                                        OnColor="#F44336"
                                        ThumbColor="White"
                                        Toggled="InsaneRules_Toggled"/>
                                <VerticalStackLayout Grid.Column="1" Margin="12,0,0,0">
                                    <Label Text="RÃ¨gles insanes"
                                           FontSize="18"
                                           FontAttributes="Bold"
                                           TextColor="{AppThemeBinding Light=#222222, Dark=#DDDDDD}"/>
                                    <Label Text="Mode extrÃªme avec rÃ¨gles modifiÃ©es et un style de jeu plus agressif"
                                           FontSize="14"
                                           TextColor="{AppThemeBinding Light=#666666, Dark=#AAAAAA}"
                                           Opacity="0.8"/>
                                </VerticalStackLayout>
                            </Grid>
                        </VerticalStackLayout>
                    </Border>
                </VerticalStackLayout>
            </Border>

                <components:Button x:Name="ContinueBtn"
                                  Name="Continuer"
                                  Margin="10,20"
                                  Clicked="ContinueClicked"/>
            </VerticalStackLayout>
        </ScrollView>
    </Grid>

</ContentPage>
